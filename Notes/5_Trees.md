# 第5章 树

## 5.1 树的基本概念

**结点的度**：结点所拥有的子树棵数。
**结点所处层次**：从根到该节点所经路径上的分支条数。
高度与深度（距离根结点最远的结点所处层次）计算的方向不同，但数值相等。

## 5.2 二叉树

**性质5.1**：在二叉树的第 $i(i \geq 1)$ 层最多有 $2^{i-1}$ 个结点。

**性质5.2**：深度为 $k(k \geq 0)$ 的二叉树最少有 $k$ 个结点，最多有 $2^k-1$ 个结点。

**性质5.3**：对任何一棵非空二叉树，如果其叶节点数为 $n_0$，度为 $2$ 的非叶结点数为 $n_2$，则 $n_0 = n_2 +1$。
二叉树中总的边数为 $e=n-1=  n_ {0}  +  n_ {1}  +  n_ {2}  -1$。又由于每个度为2的结点发出2条边, 每个度为1的结点发出1条边, 度为0的结点发出0条边，因此总的边数为 $e=2n_2+n_1$。将两个关于边的等式等同起来。

**满二叉树**：深度为 $k$ 的满二叉树有 $2^k-1$ 个结点。
**完全二叉树**：上面从第 $1$ ~ $k - 1$ 层的所有各层的结点数都是满的， 仅最下面第 $k$ 层或是满的，或从右向左连续缺若干结点。
![[Pasted image 20251213104948.png]]

**性质5.4**：具有 $n$ 个结点的完全二叉树的深度为 $\lceil \log_2 (n+1)\rceil$。

**性质5.5**：对于有 $n$ 个结点的完全二叉树，自顶向下、同一层自左向右给结点编号 $1, 2, 3, \dots, n$，编号为 $i$ 的结点简称“结点 $i$”（$1 \le i \le n$），则有以下关系：
1. 若 $i == 1$，则结点 $i$ 是根，无父结点；若 $i > 1$，则结点 $i$ 的父结点为结点 $\lfloor i/2 \rfloor$。
2. 若 $2 \times i \le n$，则结点 $i$ 的左子女为结点 $2 \times i$。
3. 若 $2 \times i + 1 \le n$，则结点 $i$ 的右子女为结点 $2 \times i + 1$。
4. 若结点编号 $i$ 为奇数（且 $i \ne 1$），处于右兄弟位置，则它的左兄弟为结点 $i-1$。
5. 若结点编号 $i$ 为偶数（且 $i \ne n$），处于左兄弟位置，则它的右兄弟为结点 $i+1$。
6. 结点 $i$ 所在层次为 $\lfloor \log_2 i \rfloor + 1$。

## 5.3 二叉树的存储表示

### 5.3.1 数组存储表示

== 堆
![[Pasted image 20251213105853.png]]

![[Pasted image 20251213105906.png]]

### 5.3.2 链接存储表示

![[Pasted image 20251213110013.png]]

![[Pasted image 20251213105957.png]]

![[Pasted image 20251213110111.png]]

## 5.4 二叉树遍历及其应用

由给定的前序序列和中序序列能够惟一地确定一棵二叉树。

$n$ 个结点的不同二叉树的棵数
$$
b_n = \begin{cases}
1,\quad n = 0\\
\sum_{i=0}^{n-1} b_i \cdot b_{n-i-1},\quad n \geq 1
\end{cases}
$$
为第 $n$ 个 Catalan 数 
$$C_{n} = \frac{1}{n+1} \binom{2n}{n} = \frac{(2n)!}{(n+1)!\cdot n!}$$

## 5.5 线索二叉树

### 5.5.1 线索

![[Pasted image 20251213113847.png]]

### 5.5.2 中序线索二叉树的建立和遍历

如果 `ltag == 0`，标明 `leftChild` 域中存放的是指向左子女结点的指针，
如果 `ltag == 1`，`leftChild` 域中是指向该结点中序下的前驱的线索；

如果 `rtag == 0`，标明 `rightChild` 域中存放的是指向右子女结点的指针，
如果 `rtag == 1`，`rightChild` 域中是指向该结点中序下的后继的线索。

![[Pasted image 20251213113919.png]]

## 5.6 树与森林

### 5.6.1 树的存储表示

#### 1. 广义表表示法

这棵树的广义表表示为 `R(A(D, E), B, C(F(G, H, K)))`。
![[Pasted image 20251213114758.png]]
#### 2. 父指针表示法

![[Pasted image 20251213114915.png]]

#### 3. 子女链表表示法

为树中每个结点设置一个子女链表，并将这些结点的数据和对应子女链表的头指针放在一个向量中。虚线箭头标出子女链表中指针的指向。
![[Pasted image 20251213115039.png]]

#### 4. 子女-兄弟链表表示法

一种二叉树表示法。每个结点由 3 个域组成：`data`，`firstChild`，`nextSibling`。
![[Pasted image 20251213115202.png]]

### 5.6.2 树、森林与二叉树的转换

![[Pasted image 20251213115409.png]]

![[Pasted image 20251213115417.png]]

![[Pasted image 20251213115429.png]]

## 5.7 树与森林的遍历及其应用

森林的先根次序遍历和后根次序遍历对应为二叉树的前序遍历和中序遍历；
树的先根次序遍历和后根次序遍历对应为二叉树的前序遍历和中序遍历。

## 5.8 堆

> 算法导论

## 5.9 Huffman 树及其应用

每次在F 中选取两棵根结点的权值最小的扩充二叉树，作为左、右子树构造一棵新的二叉树。置新的二叉树的根结点的权值为其左、右子树上根结点的权值之和。